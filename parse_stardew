"""
parses stardew valley save file
"""


def main():
    # open SaveGameInfo and store into string variable
    with open('/Users/stonemaguire/documents/local repos/stardew/perfection run/SaveGameInfo', 'r') as f:
        xml_var = f.read()

    # open new file to write parsed SaveGameInfo
    with open('/Users/stonemaguire/documents/local repos/stardew/parsed SaveGameInfo.xml', 'w') as f:
        # write first two elements
        f.write(xml_var[1:39] + '\n')
        f.write(xml_var[39:146] + '\n')

        start_char = 146 # position to start parsing from
        start_segment = ''
        end_segment = ''
        in_start_segment = False
        in_end_segment = False

        # loop through all chars in xml_var
        for char in range(start_char, len(xml_var)):
            f.write(xml_var[char]) # print character

            if in_start_segment and xml_var[char] != '>':
                start_segment += xml_var[char]
                # print(start_segment)

            if in_end_segment and xml_var[char] != '>':
                end_segment += xml_var[char]

            if xml_var[char] == '<':
                in_start_segment = True
                in_end_segment = False
            elif xml_var[char] == '>':
                in_start_segment = False
                # print(start_segment)
                if start_segment == end_segment:
                    print('start segment = end segment')
                    f.write('\n')
                # f.write('\n') # doesn't work inherently
            elif xml_var[char] == '/':
                in_end_segment = True



            
if __name__ == '__main__':
    main()
